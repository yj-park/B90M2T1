<meta name="google-signin-client_id" content="17394844799-g14bsmpn7ucaidhjfhhvgcjhit18lsv0.apps.googleusercontent.com">
<script src="https://apis.google.com/js/platform.js" async defer></script>


<div class="wrap">
	<div id="content" class="product">
		<div class="proList">
	    	<div class="option">
		    <div class="wrapper">
		    	<input type="hidden" name="msg" id="msg" value="${msg}" />
			    <form class="form-signin" id="frm" target="ifrm">  
				    <h2 class="form-signin-heading">로그인</h2>
				    <input type="text" class="form-control" id="id" name="id" placeholder="아이디 입력" required="아이디를 입력하세요." autofocus="" />
				    <input type="password" class="form-control" id="password" name="password" placeholder="비밀번호 입력" required=""/>
				    <div class="form-group">
    					<div class="col-sm-offset-2 col-sm-10">      
				    		<button class="btn btn-default" id="btnLogin">로그인</button>
				    	</div>
				    </div>
				    <br>
				    <hr>
					SNS 계정으로 간편 로그인
					<br>
					<br>
					<div class="g-signin2" data-onsuccess="onSignIn"></div>
			    </form>
		    </div>
			</div>
		</div>
	</div>
</div>
	
<script>
//로그인 체크
$("#btnLogin").click(function () {
	$.ajax ({
		url: "member/memLoginChk.do",
		type: "POST",
		dataType: "json",
		data: {
			id: $("#id").val(),
			password: $("#password").val()
		}
	}).done(function(msg) {
		console.log(msg);
		if(msg == "Hello"){
			alert("로그인 성공!");
			$("#memLogin").attr("style", "display:none");
			$("#memJoin").attr("style", "display:none");
			$("#memInfo").attr("style", "display:block");
			$("#memLogout").attr("style", "display:block");
			$("#container").load("view/main/main.html");
		}
		else {
			alert("아이디 또는 비밀번호를 확인해주세요");
		}
	})
});

// 구글 연동 로그인 회원 정보 얻어오기
function onSignIn(googleUser) {
  var profile = googleUser.getBasicProfile();
  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
  console.log('Name: ' + profile.getName());
  console.log('Image URL: ' + profile.getImageUrl());
  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
  
  alert("로그인 성공!");
	$("#memLogin").attr("style", "display:none");
	$("#memJoin").attr("style", "display:none");
	$("#memInfo").attr("style", "display:block");
	$("#memLogout").attr("style", "display:block");
	$("#container").load("view/main/main.html");
}

// 구글 연동 로그아웃
function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    console.log(auth2);
    auth2.signOut().then(function () {
    console.log('User signed out.');
    
    alert("로그아웃 성공!");
    $("#memLogin").attr("style", "display:block");
	$("#memJoin").attr("style", "display:block");
	$("#memInfo").attr("style", "display:none");
	$("#memLogout").attr("style", "display:none");
    $("#container").load("view/main/main.html");
    
    });
  }

</script>